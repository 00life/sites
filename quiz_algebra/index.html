<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Algebra 1 Quiz App</title>

  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(to right, #dff6ff, #f9fbff);
      margin: 0;
      padding: 0;
      color: #222;
    }

    header {
      background: #0077ff;
      color: white;
      text-align: center;
      padding: 18px;
      font-size: 1.9rem;
      font-weight: bold;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      padding: 20px;
    }

    .card {
      background: white;
      padding: 22px;
      border-radius: 16px;
      box-shadow: 0px 5px 14px rgba(0,0,0,0.15);
      margin-bottom: 20px;
    }

    h2 {
      margin: 0;
      font-size: 1.4rem;
    }

    /* SETTINGS GRID */
    .settings-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 18px;
      margin-top: 18px;
    }

    label {
      font-weight: bold;
      font-size: 0.9rem;
      margin-bottom: 6px;
      display: block;
    }

    input, select {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 0.95rem;
      box-sizing: border-box;
    }

    /* Start Button */
    .start-container {
      text-align: center;
      margin-top: 22px;
    }

    button {
      padding: 12px 18px;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      transform: scale(1.03);
    }

    .btn-start {
      background: #0077ff;
      color: white;
      width: 30%;
    }

    .btn-submit {
      background: #22c55e;
      color: white;
      width: 100%;
      margin-top: 12px;
    }

    .btn-next {
      background: orange;
      color: white;
      width: 40%;
      margin-top: 18px;
      display: none;
    }

    /* Progress Bar */
    .progress-bar {
      height: 18px;
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 15px;
    }

    .progress-fill {
      height: 100%;
      width: 0%;
      background: #0077ff;
      transition: 0.3s;
    }

    /* Equation Display */
    .equation-box {
      font-size: 1.8rem;
      font-weight: bold;
      text-align: center;
      padding: 15px;
      margin: 18px 0;
      background: #f0f8ff;
      border-radius: 14px;
      color: #003366;
    }

    .answer-area {
      max-width: 420px;
      margin: auto;
      text-align: center;
    }

    .feedback {
      margin-top: 18px;
      padding: 16px;
      border-radius: 14px;
      font-size: 0.95rem;
    }

    .correct {
      background: #dcfce7;
      border-left: 6px solid #22c55e;
    }

    .wrong {
      background: #fee2e2;
      border-left: 6px solid #ef4444;
    }

    ul {
      margin-top: 10px;
      line-height: 1.6;
    }

    @media(max-width: 900px) {
      .settings-grid {
        grid-template-columns: 1fr 1fr;
      }

      .btn-start, .btn-next {
        width: 100%;
      }
    }

    @media(max-width: 500px) {
      .settings-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body>

<header>
  üìò Algebra 1 Equation Solver Quiz (Grades 9‚Äì12)
</header>

<div class="container">

  <!-- SETTINGS -->
  <div class="card">
    <h2>‚öôÔ∏è Quiz Settings</h2>

    <div class="settings-grid">

      <div>
        <label>üë§ Student Name</label>
        <input type="text" id="username" value="User">
      </div>

      <div>
        <label>üìÖ Date</label>
        <input type="date" id="quizDate">
      </div>

      <div>
        <label>üìå Unit Focus</label>
        <select id="unitSelect">
          <option value="mixed">Mixed Review (Full Algebra 1)</option>
          <option value="basics">Solving Basics</option>
          <option value="distribution">Distribution</option>
          <option value="liketerms">Combining Like Terms</option>
          <option value="bothsides">Variables on Both Sides</option>
          <option value="fractions">Fractions & Decimals</option>
        </select>
      </div>

      <div>
        <label>‚≠ê Difficulty</label>
        <select id="difficulty">
          <option value="1">Easy</option>
          <option value="2">Medium</option>
          <option value="3">Hard</option>
        </select>
      </div>

      <div>
        <label>‚ùì Questions</label>
        <input type="number" id="numQuestions" value="5" min="1" max="25">
      </div>

    </div>

    <div class="start-container">
      <button class="btn-start" id="startBtn">Start Quiz üöÄ</button>
    </div>
  </div>

  <!-- QUIZ AREA -->
  <div class="card" id="quizArea" style="display:none;">
    <h2>‚úèÔ∏è Solve the Equation</h2>

    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>

    <div class="equation-box" id="questionText"></div>

    <div class="answer-area">
      <input type="text" id="answerInput" placeholder="Answer (ex: 3/4)">
      <button class="btn-submit" id="submitBtn">Submit Answer ‚úÖ</button>
    </div>

    <div id="feedbackBox"></div>

    <div style="text-align:center;">
      <button class="btn-next" id="nextBtn">Next Question ‚û°Ô∏è</button>
    </div>
  </div>

</div>

<script>
  document.getElementById("quizDate").value =
    new Date().toISOString().split("T")[0];

  let currentQuestion = 0;
  let totalQuestions = 5;
  let score = 0;
  let equationData = {};

  const startBtn = document.getElementById("startBtn");
  const submitBtn = document.getElementById("submitBtn");
  const nextBtn = document.getElementById("nextBtn");

  function parseAnswer(str) {
    str = str.trim();
    if (str.includes("/")) {
      let parts = str.split("/");
      return parseFloat(parts[0]) / parseFloat(parts[1]);
    }
    return parseFloat(str);
  }

  function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function updateProgress() {
    let percent = (currentQuestion / totalQuestions) * 100;
    document.getElementById("progressFill").style.width = percent + "%";
  }

  startBtn.onclick = () => {
    totalQuestions = parseInt(document.getElementById("numQuestions").value);
    currentQuestion = 0;
    score = 0;
    document.getElementById("quizArea").style.display = "block";
    generateQuestion();
  };

  function generateQuestion() {
    nextBtn.style.display = "none";
    document.getElementById("feedbackBox").innerHTML = "";
    updateProgress();

    let unit = document.getElementById("unitSelect").value;
    let x = randomInt(1, 10);

    let generators = [];

    // Solving Basics
    generators.push(() => {
      let a = randomInt(2, 6);
      let b = randomInt(1, 10);
      let c = a * x + b;
      return {
        equation: `${a}x + ${b} = ${c}`,
        answer: x,
        steps: [
          `Subtract ${b}`,
          `${a}x = ${c - b}`,
          `Divide by ${a}`,
          `x = ${x}`
        ]
      };
    });

    // Distribution
    generators.push(() => {
      let a = randomInt(2, 4);
      let b = randomInt(1, 6);
      let result = a * (x + b);
      return {
        equation: `${a}(x + ${b}) = ${result}`,
        answer: x,
        steps: [
          `Distribute ${a}`,
          `${a}x + ${a*b} = ${result}`,
          `Subtract ${a*b}`,
          `${a}x = ${result - a*b}`,
          `Divide by ${a}`,
          `x = ${x}`
        ]
      };
    });

    // Like Terms
    generators.push(() => {
      let a = randomInt(2, 5);
      let b = randomInt(2, 5);
      let constant = randomInt(1, 6);
      let right = (a + b) * x - constant;
      return {
        equation: `${a}x + ${b}x - ${constant} = ${right}`,
        answer: x,
        steps: [
          `Combine like terms: ${(a+b)}x - ${constant}`,
          `Add ${constant}`,
          `${(a+b)}x = ${right+constant}`,
          `Divide by ${(a+b)}`,
          `x = ${x}`
        ]
      };
    });

    // Both Sides
    generators.push(() => {
      let a = randomInt(3, 6);
      let c = randomInt(1, 3);
      let b = randomInt(1, 6);
      let d = a*x + b - c*x;
      return {
        equation: `${a}x + ${b} = ${c}x + ${d}`,
        answer: x,
        steps: [
          `Subtract ${c}x`,
          `${a-c}x + ${b} = ${d}`,
          `Subtract ${b}`,
          `${a-c}x = ${d-b}`,
          `Divide by ${a-c}`,
          `x = ${x}`
        ]
      };
    });

    // Fractions
    generators.push(() => {
      let denom = randomInt(2, 5);
      let b = randomInt(1, 4);
      let result = (x/denom + b).toFixed(2);
      return {
        equation: `x/${denom} + ${b} = ${result}`,
        answer: x,
        steps: [
          `Subtract ${b}`,
          `x/${denom} = ${(result-b).toFixed(2)}`,
          `Multiply by ${denom}`,
          `x = ${x}`
        ]
      };
    });

    // Unit filtering
    if (unit === "basics") equationData = generators[0]();
    else if (unit === "distribution") equationData = generators[1]();
    else if (unit === "liketerms") equationData = generators[2]();
    else if (unit === "bothsides") equationData = generators[3]();
    else if (unit === "fractions") equationData = generators[4]();
    else equationData = generators[randomInt(0, generators.length-1)]();

    document.getElementById("questionText").innerText = equationData.equation;
    document.getElementById("answerInput").value = "";
  }

  submitBtn.onclick = () => {
    let userAnswer = parseAnswer(document.getElementById("answerInput").value);
    let correctAnswer = equationData.answer;

    let isCorrect = Math.abs(userAnswer - correctAnswer) < 0.001;
    if (isCorrect) score++;

    document.getElementById("feedbackBox").innerHTML = `
      <div class="feedback ${isCorrect ? "correct" : "wrong"}">
        <h3>${isCorrect ? "‚úÖ Correct!" : "‚ùå Incorrect"}</h3>
        <p><b>Correct Answer:</b> x = ${correctAnswer}</p>

        <h4>Step-by-Step Solution:</h4>
        <ul>
          ${equationData.steps.map(s => `<li>${s}</li>`).join("")}
        </ul>
      </div>
    `;

    nextBtn.style.display = "inline-block";
  };

  nextBtn.onclick = () => {
    currentQuestion++;
    if (currentQuestion < totalQuestions) {
      generateQuestion();
    } else {
      document.getElementById("feedbackBox").innerHTML = `
        <div class="feedback correct">
          <h2>üéâ Quiz Finished!</h2>
          <p>Final Score: <b>${score} / ${totalQuestions}</b></p>
        </div>
      `;
      nextBtn.style.display = "none";
    }
    updateProgress();
  };
</script>

</body>
</html>
